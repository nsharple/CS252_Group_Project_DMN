<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Google Signin meta tags -->
	<meta name="google-signin-scope" content="profile email">
	<meta name="google-signin-client_id" content="16789477210-7hhak27tf126sdm84618trt2f5qlptip.apps.googleusercontent.com">

    <script>
	function includeHTML() {
		var elements, i, element, file, xhttp;
		// Loop through each HTML element in the file to be included
		elements = document.getElementsByTagName("*");
		for (i = 0; i < elements.length; i++) {
			element = elements[i];
			file = element.getAttribute("include-html");
			if (file) {
				// Make an HTTP request using the attribute as the file name
				xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4) {
						if (this.status == 200) {element.innerHTML = this.responseText;}
						if (this.status == 400) {element.innerHTML = "Page not found.";}
						// Remove the attribute and call this function again
						element.removeAttribute("include-html");
						includeHTML();
					}
				}
				xhttp.open("GET", file, false);
				xhttp.send();
				// Exit the function
				return;
			}
		}
	}

	function addGoogleScript()
	{
	    var script = document.createElement("script");
	    script.src = "https://apis.google.com/js/platform.js";
	    script.async = true;
	    script.defer = true;
	    document.head.appendChild(script);
	}

	var email;

	function onSignIn(googleUser) {

		// Useful data for client-side scripts:
		var profile = googleUser.getBasicProfile();
		console.log('Full Name: ' + profile.getGivenName());
		console.log('Family Name: ' + profile.getFamilyName());
		console.log("Image URL: " + profile.getImageUrl());
		console.log("Email: " + profile.getEmail());

		// Put email in a global variable for later
		email = profile.getEmail();
	}

	function populateLogsList()
	{
		var logs_list, xhttp;

		if (email == null) {
			return;
		}

		logs_list = document.getElementById("logs_list");

		xhttp = new XMLHttpRequest();

		xhttp.onreadystatechange = function()
		{
			if (this.readyState == 4)
			{
				if (this.status == 200)
				{
					logs_list.innerHTML += this.responseText;
				}
			}
		}

		xhttp.open("GET", "https://us-east1-runrecordshare.cloudfunctions.net/get-logs?email=" + email, true);
		xhttp.send();
	}

</script>

	<!-- Bootstrap stuff -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="css/styles.css">

    <title>RunRecordShare</title>
</head>


<body>

	<div include-html="navbar_include.html"></div>

	<div id="content" class="container">
		<div class="card mt-5">
			<div class="card-header h4">
				Goals
				<a id="newGoalButton" class="btn btn-primary pull-right" href="newgoal.html" role="button"><i class="fa fa-plus"></i></a>
			</div>
			<div id="goals_list" class="list-group list-group-flush" style="max-height: 300px; overflow-y: scroll; resize: vertical">
				<div class="list-group-item list-group-item-action py-0">
					<div class="row">
						<div class="col-md-2 p-4">
							<div class="align-self-center text-center h1">
								6
							</div>
							<div class="align-self-center text-center h6">
								out of 25 miles
							</div>
						</div>
						<div class="col border-left">
							<div class="row border-bottom">
								<div class="col p-2 px-3">
									<div class="progress">
										<div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
									</div>
								</div>
							</div>
							<div class="row border-bottom">
								<div class="border-right p-2 px-3">
									<span class="h6">From: </span>
									<span>04/22/2019</span>
								</div>
								<div class="p-2 px-3">
									<span class="h6">To: </span>
									<span>04/29/2019</span>
								</div>
							</div>
							<div class="row">
								<div class="col p-2 px-3">
									<span class="h6">Additional Notes: </span>
									<span>-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="list-group-item list-group-item-action py-0">
					<div class="row">
						<div class="col-md-2 p-4">
							<div class="align-self-center text-center h1">
								4
							</div>
							<div class="align-self-center text-center h6">
								out of 8 hours
							</div>
						</div>
						<div class="col border-left">
							<div class="row border-bottom">
								<div class="col p-2 px-3">
									<div class="progress">
										<div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
									</div>
								</div>
							</div>
							<div class="row border-bottom">
								<div class="border-right p-2 px-3">
									<span class="h6">From: </span>
									<span>04/22/2019</span>
								</div>
								<div class="p-2 px-3">
									<span class="h6">To: </span>
									<span>04/29/2019</span>
								</div>
							</div>
							<div class="row">
								<div class="col p-2 px-3">
									<span class="h6">Additional Notes: </span>
									<span>-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="list-group-item list-group-item-action py-0">
					<div class="row">
						<div class="col-md-2 p-4">
							<div class="align-self-center text-center h1">
								6
							</div>
							<div class="align-self-center text-center h6">
								out of 25 miles
							</div>
						</div>
						<div class="col border-left">
							<div class="row border-bottom">
								<div class="col p-2 px-3">
									<div class="progress">
										<div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
									</div>
								</div>
							</div>
							<div class="row border-bottom">
								<div class="border-right p-2 px-3">
									<span class="h6">From: </span>
									<span>04/22/2019</span>
								</div>
								<div class="p-2 px-3">
									<span class="h6">To: </span>
									<span>04/29/2019</span>
								</div>
							</div>
							<div class="row">
								<div class="col p-2 px-3">
									<span class="h6">Additional Notes: </span>
									<span>-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="list-group-item list-group-item-action py-0">
					<div class="row">
						<div class="col-md-2 p-4">
							<div class="align-self-center text-center h1">
								4
							</div>
							<div class="align-self-center text-center h6">
								out of 8 hours
							</div>
						</div>
						<div class="col border-left">
							<div class="row border-bottom">
								<div class="col p-2 px-3">
									<div class="progress">
										<div class="progress-bar progress-bar-striped bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
									</div>
								</div>
							</div>
							<div class="row border-bottom">
								<div class="border-right p-2 px-3">
									<span class="h6">From: </span>
									<span>04/22/2019</span>
								</div>
								<div class="p-2 px-3">
									<span class="h6">To: </span>
									<span>04/29/2019</span>
								</div>
							</div>
							<div class="row">
								<div class="col p-2 px-3">
									<span class="h6">Additional Notes: </span>
									<span>-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="card my-5">
			<div class="card-header h4">
				Logs
				<a id="newLogButton" class="btn btn-primary pull-right" href="newlog.html" role="button"><i class="fa fa-plus"></i></a>
			</div>
			<div id="logs_list" class="list-group list-group-flush" style="max-height: 300px; overflow-y: scroll; resize: vertical">
				<!-- Template
				<div class="list-group-item list-group-item-action py-0">
					<div class="row">
						<div class="col-md-2 text-center align-self-center h6 p-4">
							MM/DD/YYYY
						</div>
						<div class="col border-left">
							<div class="row border-bottom">
								<div class="border-right p-2 px-3">
									<span class="h6">Distance: </span>
									<span>-</span>
								</div>
								<div class="p-2 px-3">
									<span class="h6">Time: </span>
									<span>-</span>
								</div>
							</div>
							<div class="row border-bottom">
								<div class="col p-2 px-3">
									<span class="h6">Location: </span>
									<span>-</span>
								</div>
							</div>
							<div class="row">
								<div class="col p-2 px-3">
									<span class="h6">Additional Notes: </span>
									<span>-</span>
								</div>
							</div>
						</div>
					</div>
				</div>
				end template -->
			</div>
		</div>
	</div>

	<script>
	includeHTML();
	addGoogleScript();
	populateLogsList();
	</script>

	<script>
		function signOut() {
			var auth2 = gapi.auth2.getAuthInstance();
			auth2.signOut().then(function () {
				console.log('User signed out.');
			});
		}
	</script>

</body>

</html>
